<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Language" content="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;}
#l-map{height:100%;width:78%;float:left;border-right:2px solid #bcbcbc;}
#r-result{height:100%;width:20%;float:left;}
</style>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=HGIGZtrjNUBCaiaXk6pupV6r"></script>
<title>GreenTech Map</title>
</head>
<body>
<div id="l-map"></div>
<div id="r-result"></div>
</body>
</html>
<br>
<script type="text/javascript">

// 百度地图API功能
var sContent1 =
"<h4 style='margin:0 0 5px 0;padding:0.2em 0'>天安门</h4>" + 
"<img style='float:right;margin:4px' id='imgDemo' src='http://app.baidu.com/map/images/tiananmen.jpg' width='139' height='104' title='天安门'/>" + 
"<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>天安门坐落在中国北京市中心,故宫的南侧,与天安门广场隔长安街相望,是清朝皇城的大门...</p>" + 
"</div>";
var sContent2 =
"<h4 style='margin:0 0 5px 0;padding:0.2em 0'>杭州天子岭生活垃圾卫生填埋场</h4>" + 
"<img style='float:right;margin:4px' id='imgDemo' src='http://hiphotos.baidu.com/lvpics/pic/item/6dc09e0a7bd78955b1351ddf.jpg' width='139' height='104' title='天安门'/>" + 
"<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>杭州，简称杭，是浙江省省会、副省级市，位于中国东南沿海、浙江省北部、钱塘江下游北岸、京杭大运河南端，是浙江省的政治、经济、文化、科教、交通、传媒、通信和金融中心，华东地区重要的经济、科教、文化、金融中心及交通、通信枢纽，自古有“人间天堂”的美誉。</p>" + 
"</div>";
var tzlContent = "杭州市天子岭生活垃圾卫生填埋场地处杭州市北郊的半山镇石塘村天子岭山的青龙坞山谷，为全国首座符合国家建设部卫生填埋标准的大型山谷型垃圾填埋场，1991年4月投入使用至2006年年底，"+
"已处理城市垃圾800多万吨，拥有甲级环保运营资质和工程咨询Ⅱ级资质。</h4>" +
"<img style='float:center;margin:1px' id='tzlIMG' src='http://ori.hangzhou.com.cn/ornews/images/attachement/jpg/site2/20101025/00192177cf090e2f1c9a1b.jpg' width='139' height='104' title='天子岭'/>"+
"</div>";
var map = new BMap.Map("l-map");
map.enableScrollWheelZoom();   

var contextMenu = new BMap.ContextMenu(); 

var txtMenuItem = [
  {
   text:'放大',
   callback:function(){map.zoomIn()}
  },
  {
   text:'缩小',
   callback:function(){map.zoomOut()}
  },
  {
   text:'放置到最大级',
   callback:function(){map.setZoom(18)}
  },
  {
   text:'查看全国',
   callback:function(){map.setZoom(4)}
  },
  {
   text:'在此添加标注',
   callback:function(p){
    var marker = new BMap.Marker(p), px = map.pointToPixel(p);
    map.addOverlay(marker);
   }
  }
 ];
 
  for(var i=0; i < txtMenuItem.length; i++){
  contextMenu.addItem(new BMap.MenuItem(txtMenuItem[i].text,txtMenuItem[i].callback,100));
  if(i==1 || i==3) {
   contextMenu.addSeparator();
  }
 }
 map.addContextMenu(contextMenu);
 
var point1 = new BMap.Point(116.404, 39.915);
var marker1 = new BMap.Marker(point1);


var infoWindow1 = new BMap.InfoWindow(sContent1);  // 创建信息窗口对象

map.centerAndZoom(point1, 5);
map.addOverlay(marker1);    //添加标注点到地图上

marker1.addEventListener("click", function(){          
   this.openInfoWindow(infoWindow1);
   //图片加载完毕重绘infowindow
   document.getElementById('imgDemo').onload = function (){
       infoWindow1.redraw();   //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
   }
});

var point2 = new BMap.Point(120.2091, 30.393);
var marker2 = new BMap.Marker(point2);
map.addOverlay(marker2);
var infoWindow2 = new BMap.InfoWindow(sContent2);  // 创建信息窗口对象
marker2.setAnimation(BMAP_ANIMATION_BOUNCE); 
marker2.addEventListener("click", function(){          
   this.openInfoWindow(infoWindow2);
   //图片加载完毕重绘infowindow
   document.getElementById('imgDemo').onload = function (){
       infoWindow2.redraw();   //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
   }
   document.getElementById("r-result").innerHTML = tzlContent;
});


</script>
